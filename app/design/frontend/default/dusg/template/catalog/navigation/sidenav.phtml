<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category   design_default
 * @package    Mage
 * @copyright  Copyright (c) 2008 Irubin Consulting Inc. DBA Varien (http://www.varien.com)
 * @license    http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>
<?php 
/**
 * Top menu for store
 *
 * @see Mage_Catalog_Block_Navigation
 */
?>
<?php 
if(!defined('ACCORDION')){
	define('ACCORDION', 1);
?>
	<script type="text/javascript" src="<?php echo $this->getSkinUrl('js/jquery.accordion.js') ?>"></script>
<?php
}
?>
<script type="text/javascript">
	$jsmart(document).ready(function($) {
		$('#yt_sidenav li.level0 > a').addClass ('subhead');
		$('#yt_sidenav li.level0 > a').after ('<a href="#" title="" class="toggle">&nbsp;</a>');	//header 
		// second simple accordion with special markup
		$jsmart('#yt_sidenav').accordion({
			active: '.active',
			header: '.toggle',		// same header above
			navigation: true,
			event: 'click',
			fillSpace: false,
			autoheight: false,
			alwaysOpen: false, 
			animated: 'easeslide',
			collapsible: true
		});	
		var header_element = $jsmart("#yt_sidenav .level2 .current").parents('.parent').children('a.toggle');

		//check if headerId is set, if so activate that id
		if (header_element) {
			// $jsmart('#yt_sidenav').accordion('option', 'animated', false);
			$jsmart('#yt_sidenav').accordion('activate', header_element);
			// $jsmart('#yt_sidenav').accordion('option', 'animated', 'slide');
		}			
	// setTimeout(
		// function() 
		// {
			// var header_element = $jsmart("#yt_sidenav .level2 .current").parents('.parent').children('a.toggle');

			// //check if headerId is set, if so activate that id
			// if (header_element) {
				// // $jsmart('#yt_sidenav').accordion('option', 'animated', false);
				// $jsmart('#yt_sidenav').accordion('activate', header_element);
				// // $jsmart('#yt_sidenav').accordion('option', 'animated', 'slide');
			// }	
		// }, 5000);
	
	});
</script>
<div class="block block-yt-layered-nav">
  <div class="block-layered-nav-inner">
    <div class="block-title">
        <strong><?php echo $this->__('Products Categories') ?></strong>
    </div>
    <div class="block-content clearfix">
        <ul id="yt_sidenav">
        <?php foreach ($this->getStoreCategories() as $_category): ?>
            <?php echo $this->drawItem($_category) ?>
        <?php endforeach ?>
        </ul>
    </div>
    <?php echo $this->getChildHtml('topLeftLinks') ?>
  </div>
</div>